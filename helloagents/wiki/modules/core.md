# core

## 目的
提供统一的命令路由、对话状态机、权限校验与审计能力，屏蔽具体服务差异。

## 模块概述
- **职责:** 解析用户意图（消息/按钮事件）、维护交互状态、触发适配器动作、生成回复内容
- **状态:** 🚧开发中
- **最后更新:** 2026-01-12

## 规范

### 需求: 多步交互状态机
**模块:** core
支持“选择动作 → 输入参数 → 二次确认 → 执行 → 回显”的状态流转，包含 TTL 超时与取消。

### 需求: 权限与审计
**模块:** core
提供用户白名单/简单角色控制，危险操作二次确认，输出结构化审计日志。

### 需求: 入口指令
**模块:** core
支持在应用会话中输入关键词打开菜单（如“容器”/“菜单”/“unraid”），并在会话过期时给出明确提示。

## API接口
本模块不直接对外提供 HTTP API，通过内部接口供 `wecom` 调用。

## 数据模型
参见 `wiki/data.md` 的会话状态与审计事件。

## 依赖
- wecom
- unraid

## 变更历史
- 2026-01-12: 初始化 core 路由与会话状态机（内存 + TTL）
